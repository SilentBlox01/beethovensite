<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="LibreShield - Suite de protección de privacidad y educación en ciberseguridad">
    <meta name="theme-color" content="#f8fafc">
    <title>LibreShield - Privacy & Security</title>
    
    <!-- Performance Optimizations -->
    <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="dns-prefetch" href="https://cdn.jsdelivr.net">
    <link rel="dns-prefetch" href="https://cdnjs.cloudflare.com">
    
    <!-- Font Loading with font-display: swap for better performance -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet" media="print" onload="this.media='all'">
    <noscript><link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet"></noscript>
    
    <!-- Inline critical CSS -->
    <style>
      /* Critical Path Rendering */
      html {
        scroll-behavior: smooth;
        color-scheme: light dark;
      }
      
      body {
        font-family: system-ui, -apple-system, 'Inter', sans-serif;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        text-rendering: optimizeLegibility;
        margin: 0;
        padding: 0;
      }

      /* Default Primary Color (Teal) Fallback */
      :root {
        --color-primary-50: 240 253 250;
        --color-primary-100: 204 251 241;
        --color-primary-200: 153 246 228;
        --color-primary-300: 94 234 212;
        --color-primary-400: 45 212 191;
        --color-primary-500: 20 184 166;
        --color-primary-600: 13 148 136;
        --color-primary-700: 15 118 110;
        --color-primary-800: 17 94 89;
        --color-primary-900: 19 78 74;
        --color-primary-950: 4 47 46;
      }

      /* Advanced Cyber Background - Optimized */
      .cyber-bg {
        position: fixed;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        z-index: -1;
        background-color: #f8fafc;
        overflow: hidden;
        will-change: background-color;
      }
      
      .dark .cyber-bg {
        background-color: #020617;
      }

      .cyber-grid {
        position: absolute;
        width: 200%;
        height: 200%;
        top: -50%;
        left: -50%;
        background-image: 
          linear-gradient(rgba(148, 163, 184, 0.1) 1px, transparent 1px),
          linear-gradient(90deg, rgba(148, 163, 184, 0.1) 1px, transparent 1px);
        background-size: 40px 40px;
        transform: perspective(500px) rotateX(60deg);
        animation: cyber-grid-move 20s linear infinite;
        opacity: 0.5;
        contain: layout style paint;
      }

      .dark .cyber-grid {
        background-image: 
          linear-gradient(rgba(51, 65, 85, 0.3) 1px, transparent 1px),
          linear-gradient(90deg, rgba(51, 65, 85, 0.3) 1px, transparent 1px);
      }

      .scanlines {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(to bottom, rgba(255,255,255,0), rgba(255,255,255,0) 50%, rgba(0,0,0,0.02) 50%, rgba(0,0,0,0.02));
        background-size: 100% 4px;
        pointer-events: none;
        z-index: 1;
        contain: layout style paint;
      }
      
      .dark .scanlines {
        background: linear-gradient(to bottom, rgba(0,0,0,0), rgba(0,0,0,0) 50%, rgba(0,0,0,0.2) 50%, rgba(0,0,0,0.2));
      }

      .vignette {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: radial-gradient(circle, transparent 50%, rgba(0,0,0,0.05) 90%, rgba(0,0,0,0.1) 100%);
        pointer-events: none;
        z-index: 2;
        contain: layout style paint;
      }

      .dark .vignette {
        background: radial-gradient(circle, transparent 40%, rgba(2, 6, 23, 0.6) 90%, rgba(2, 6, 23, 1) 100%);
      }

      /* Noise Overlay - Optimized */
      .noise-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        z-index: 0;
        opacity: 0.03;
        background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
        contain: layout style paint;
      }

      /* Inspector Styles */
      .inspector-highlight {
        outline: 2px solid #f43f5e !important;
        background-color: rgba(244, 63, 94, 0.1) !important;
        cursor: crosshair !important;
        z-index: 9999 !important;
      }

      @keyframes cyber-grid-move {
        0% { transform: perspective(500px) rotateX(60deg) translateY(0); }
        100% { transform: perspective(500px) rotateX(60deg) translateY(40px); }
      }

      /* Custom Animations */
      @keyframes fade-in-up {
        from { opacity: 0; transform: translateY(20px); }
        to { opacity: 1; transform: translateY(0); }
      }
      
      @keyframes fade-in {
        from { opacity: 0; }
        to { opacity: 1; }
      }

      @keyframes scale-in {
        from { opacity: 0; transform: scale(0.95); }
        to { opacity: 1; transform: scale(1); }
      }

      @keyframes float {
        0% { transform: translateY(0px); }
        50% { transform: translateY(-15px); }
        100% { transform: translateY(0px); }
      }
      
      @keyframes float-delayed {
        0% { transform: translateY(0px); }
        50% { transform: translateY(-10px); }
        100% { transform: translateY(0px); }
      }

      @keyframes pulse-soft {
        0%, 100% { opacity: 0.6; }
        50% { opacity: 0.8; }
      }

      .animate-fade-in-up {
        animation: fade-in-up 0.6s cubic-bezier(0.16, 1, 0.3, 1) forwards;
      }
      
      .animate-fade-in {
        animation: fade-in 0.5s ease-out forwards;
      }

      .animate-scale-in {
        animation: scale-in 0.4s cubic-bezier(0.16, 1, 0.3, 1) forwards;
      }

      .animate-float {
        animation: float 6s ease-in-out infinite;
      }
      
      .animate-float-delayed {
        animation: float-delayed 8s ease-in-out infinite;
        animation-delay: 1s;
      }
      
      .animate-pulse-soft {
        animation: pulse-soft 4s ease-in-out infinite;
      }

      /* Scrollbar */
      ::-webkit-scrollbar {
        width: 8px;
        height: 8px;
      }
      ::-webkit-scrollbar-track {
        background: transparent;
      }
      ::-webkit-scrollbar-thumb {
        background: #CBD5E1;
        border-radius: 4px;
      }
      ::-webkit-scrollbar-thumb:hover {
        background: #94A3B8;
      }
      
      /* Dark mode scrollbar */
      .dark ::-webkit-scrollbar-thumb {
        background: #475569;
      }
      .dark ::-webkit-scrollbar-thumb:hover {
        background: #64748b;
      }

      /* Reduce motion for users who prefer it */
      @media (prefers-reduced-motion: reduce) {
        * {
          animation-duration: 0.01ms !important;
          animation-iteration-count: 1 !important;
          transition-duration: 0.01ms !important;
          scroll-behavior: auto !important;
        }
      }
    </style>

    <!-- Tailwind CSS - Note: Consider migrating to build-time CSS in future -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        darkMode: 'class',
        theme: {
          extend: {
            fontFamily: {
              sans: ['Inter', 'system-ui', '-apple-system', 'sans-serif'],
            },
            colors: {
              slate: {
                850: '#1e293b', 
                950: '#020617',
              },
              primary: {
                50: 'rgb(var(--color-primary-50) / <alpha-value>)',
                100: 'rgb(var(--color-primary-100) / <alpha-value>)',
                200: 'rgb(var(--color-primary-200) / <alpha-value>)',
                300: 'rgb(var(--color-primary-300) / <alpha-value>)',
                400: 'rgb(var(--color-primary-400) / <alpha-value>)',
                500: 'rgb(var(--color-primary-500) / <alpha-value>)',
                600: 'rgb(var(--color-primary-600) / <alpha-value>)',
                700: 'rgb(var(--color-primary-700) / <alpha-value>)',
                800: 'rgb(var(--color-primary-800) / <alpha-value>)',
                900: 'rgb(var(--color-primary-900) / <alpha-value>)',
                950: 'rgb(var(--color-primary-950) / <alpha-value>)',
              }
            }
          }
        }
      }
    </script>

    <!-- Lazy load external libraries only when needed -->
    <script async>
      // Lazy load Leaflet (only if ImageLab page is loaded)
      window.loadLeaflet = function() {
        if (document.getElementById('leaflet-css')) return;
        const link = document.createElement('link');
        link.id = 'leaflet-css';
        link.rel = 'stylesheet';
        link.href = 'https://unpkg.com/leaflet@1.9.4/dist/leaflet.css';
        link.integrity = 'sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=';
        link.crossOrigin = '';
        document.head.appendChild(link);

        const script = document.createElement('script');
        script.src = 'https://unpkg.com/leaflet@1.9.4/dist/leaflet.js';
        script.integrity = 'sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=';
        script.crossOrigin = '';
        script.async = true;
        document.head.appendChild(script);
      };

      // Lazy load Exif.js (only if ImageLab page is loaded)
      window.loadExif = function() {
        if (window.EXIF) return;
        const script = document.createElement('script');
        script.src = 'https://cdn.jsdelivr.net/npm/exif-js';
        script.async = true;
        document.head.appendChild(script);
      };

      // Lazy load QRious (only if needed)
      window.loadQRious = function() {
        if (window.QRious) return;
        const script = document.createElement('script');
        script.src = 'https://cdnjs.cloudflare.com/ajax/libs/qrious/4.0.2/qrious.min.js';
        script.async = true;
        document.head.appendChild(script);
      };
    </script>
</head>
  <body class="bg-transparent text-slate-800 dark:text-slate-200 transition-colors duration-300">
    <div class="cyber-bg">
        <div class="cyber-grid"></div>
        <div class="scanlines"></div>
        <div class="vignette"></div>
    </div>
    <div class="noise-overlay"></div>
    <div id="root" class="relative z-10"></div>
  <script type="module" src="/index.tsx"></script>
</body>
</html>